<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Ho·∫°t ƒë·ªông | The Blouse</title>
    <link href="https://i.ibb.co/0jqsMq0Z/your-image.png" rel="icon" type="image/png" />
    <link href="https://i.ibb.co/0jqsMq0Z/your-image.png" rel="apple-touch-icon" />
    <!-- Font -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <!-- Use shared site styles -->
    <link href="./styles.css" rel="stylesheet" />
    <style>
        .page-hero {
            padding: 54px 0 30px;
            text-align: center;
        }

        .page-hero h1 {
            margin: 0 0 10px;
            font-size: clamp(32px, 5vw, 42px);
            letter-spacing: -0.03em;
        }

        .page-hero p {
            margin: 0 auto;
            color: var(--t-muted);
            font-weight: 600;
            max-width: 60ch;
        }

        .events-grid {
            max-width: 1200px;
            margin: 0 auto 80px;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .gallery-card {
            display: flex;
            flex-direction: column;
            border-radius: 20px;
            overflow: hidden;
            background: color-mix(in srgb, var(--t-panel2) 80%, transparent);
            border: 1px solid var(--t-border);
            text-decoration: none;
            color: var(--t-text);
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            height: 100%;
        }

        .gallery-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border-color: color-mix(in srgb, var(--accent) 50%, var(--t-border));
        }

        body[data-theme="light"] .gallery-card {
            box-shadow: 0 8px 24px rgba(14, 18, 24, 0.06);
        }

        body[data-theme="light"] .gallery-card:hover {
            box-shadow: 0 12px 32px rgba(14, 18, 24, 0.12);
        }

        .gallery-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-bottom: 1px solid var(--t-border);
        }

        .card-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .card-content h3 {
            margin: 0 0 10px;
            font-size: 20px;
            font-weight: 800;
            line-height: 1.3;
        }

        .card-content p {
            margin: 0 0 16px;
            font-size: 14px;
            color: var(--t-muted);
            line-height: 1.5;
            flex: 1;
        }

        .card-meta {
            font-size: 13px;
            color: var(--t-muted);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .loading-state {
            text-align: center;
            width: 100%;
            padding: 60px 20px;
            grid-column: 1 / -1;
            color: var(--t-muted);
            font-size: 18px;
            font-weight: 600;
            animation: pulse 1.5s infinite;
        }

        .empty-state {
            text-align: center;
            width: 100%;
            padding: 60px 20px;
            grid-column: 1 / -1;
            color: var(--t-muted);
            font-size: 18px;
            font-weight: 600;
        }

        @keyframes pulse {
            0% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.6;
            }
        }
    </style>
    <script src="./common-ui.js" defer></script>
</head>

<body data-theme="dim-dark">

    <div id="site-header"></div>
    <div id="loading-bar"></div>

    <main class="content-wrapper">
        <section class="page-hero">
            <div class="container" style="max-width: 1200px; padding: 0 20px;">
                <h1>Nh·∫≠t k√Ω ho·∫°t ƒë·ªông</h1>
                <p>N∆°i The Blouse l∆∞u gi·ªØ l·∫°i nh·ªØng k·ªâ ni·ªám ƒë·∫πp, nh·ªØng d·ª± √°n √Ω nghƒ©a v√† nh·ªØng n·ªó l·ª±c kh√¥ng ng·ª´ng ngh·ªâ
                    r√≤ng r√£ v√¨ c·ªông ƒë·ªìng.</p>
            </div>
        </section>

        <section class="events-grid" id="events-grid">
            <div class="loading-state">ƒêang t·∫£i danh s√°ch ho·∫°t ƒë·ªông...</div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="footer-inner">
            <div class="footer-col footer-brand">
                <div class="footer-logo">To @TheBlouse <span aria-hidden="true">‚ô°</span></div>
                <p class="footer-desc">G√≥c nh·ªè ƒë·ªÉ l∆∞u l·∫°i ho·∫°t ƒë·ªông v√† nh·ªØng l·ªùi ch√∫c g·ª≠i t·ªõi Vi·ªán Huy·∫øt h·ªçc.</p>
                <div class="footer-social" aria-label="M·∫°ng x√£ h·ªôi">
                    <a class="social-btn" href="https://www.facebook.com/theblouse.prj" aria-label="Facebook"><span
                            class="social-ico">f</span><span class="social-text">FACEBOOK</span></a>
                    <a class="social-btn" href="https://www.instagram.com/blouse_thantien" aria-label="Instagram"><span
                            class="social-ico">‚óé</span><span class="social-text">INSTAGRAM</span></a>
                </div>
                <ul class="footer-contact">
                    <li><span class="fc-ico">‚òé</span><span>037 501 3747</span></li>
                    <li><span class="fc-ico">‚åÇ</span><span>H√† N·ªôi</span></li>
                    <li><span class="fc-ico">‚úâ</span><a
                            href="mailto:theblouse.prj@gmail.com">theblouse.prj@gmail.com</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <div class="footer-title">S·∫£n ph·∫©m</div>
                <a class="footer-link" href="origin.html">H√†nh tr√¨nh</a>
                <a class="footer-link" href="events.html">Ho·∫°t ƒë·ªông</a>
                <a class="footer-link" href="memb.html">Th√†nh vi√™n</a>
                <a class="footer-link" href="messages.html">L·ªùi nh·∫Øn</a>
            </div>

            <div class="footer-col">
                <div class="footer-title">Ch√≠nh s√°ch</div>
                <a class="footer-link" href="#">H∆∞·ªõng d·∫´n</a>
                <a class="footer-link" href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                <a class="footer-link" href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                <a class="footer-link" href="#">Li√™n h·ªá h·ªó tr·ª£</a>
            </div>

            <div class="footer-col footer-newsletter" id="newsletter">
                <div class="footer-title">ƒêƒÉng k√≠ nh·∫≠n tin</div>
                <p class="footer-sub">ƒê·ªÉ l·∫°i th√¥ng tin, t·ª•i m√¨nh s·∫Ω c·∫≠p nh·∫≠t nh·ªØng tin t·ª©c quan tr·ªçng.</p>
                <form class="footer-form" onsubmit="return false;">
                    <label class="footer-field">
                        <span>H·ªç t√™n</span>
                        <input autocomplete="name" placeholder="T√™n c·ªßa b·∫°n" type="text" />
                    </label>
                    <label class="footer-field">
                        <span>Email</span>
                        <input autocomplete="email" placeholder="you@email.com" type="email" />
                    </label>
                    <button class="footer-submit" type="button">ƒêƒÉng k√Ω</button>
                </form>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-bottom-links">
                <a href="#">GI·ªöI THI·ªÜU D·ª∞ √ÅN</a>
                <span class="dot">|</span>
                <a href="memb.html">TH√ÄNH VI√äN THE BLOUSE</a>
                <span class="dot">|</span>
                <a href="events.html">CHI TI·∫æT HO·∫†T ƒê·ªòNG</a>
            </div>
            <div class="footer-copy">Copyright ¬© 2023 - 2026 ‚Ä¢ All rights reserved</div>
            <button aria-label="L√™n ƒë·∫ßu trang" class="footer-top" type="button">‚åÉ</button>
        </div>
    </footer>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCKysT8eZ3LJqyi7vCjoqQGIpjgTyt7HYg",
            authDomain: "loiyeuthuong-5bfab.firebaseapp.com",
            projectId: "loiyeuthuong-5bfab",
            storageBucket: "loiyeuthuong-5bfab.firebasestorage.app",
            messagingSenderId: "544284022045",
            appId: "1:544284022045:web:22f2eef2ed918d93707df4"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Theme is now handled globally by common-ui.js


        // Loading bar and footer
        window.addEventListener('load', () => {
            const loadingBar = document.getElementById('loading-bar');
            if (!loadingBar) return;
            setTimeout(() => {
                loadingBar.classList.add('loading-complete');
                setTimeout(() => loadingBar.remove(), 500);
            }, 400);

            const btn = document.querySelector('.footer-top');
            if (btn) btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        });

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Fetch events
        document.addEventListener("DOMContentLoaded", function () {
            const grid = document.getElementById("events-grid");

            db.collection("gallery").orderBy("order", "asc").get()
                .then((snapshot) => {
                    if (snapshot.empty) {
                        grid.innerHTML = '<div class="empty-state">Ch∆∞a c√≥ b√†i vi·∫øt hay ho·∫°t ƒë·ªông n√†o.</div>';
                        return;
                    }

                    let html = '';
                    snapshot.forEach((doc) => {
                        const data = doc.data();

                        let dateText = "C·∫≠p nh·∫≠t g·∫ßn ƒë√¢y";
                        if (data.updatedAt) {
                            dateText = new Date(data.updatedAt.toDate()).toLocaleDateString('vi-VN');
                        }

                        html += `
                            <a href="article.html?id=${doc.id}" class="gallery-card">
                                <img src="${data.image}" alt="${escapeHtml(data.title)}" loading="lazy">
                                <div class="card-content">
                                    <h3>${escapeHtml(data.title)}</h3>
                                    <p>${escapeHtml(data.description || '')}</p>
                                    <div class="card-meta">
                                        <span>üìÖ ${dateText}</span>
                                    </div>
                                </div>
                            </a>
                        `;
                    });

                    grid.innerHTML = html;
                })
                .catch((error) => {
                    grid.innerHTML = `<div class="empty-state" style="color:#e74c3c;">L·ªói t·∫£i d·ªØ li·ªáu: ${error.message}</div>`;
                });
        });
    </script>
</body>

</html>